<!DOCTYPE html>
<html lang="utf-8">
<head>
    <!--meta-->
    <title>DataTables初始化对照模板3（全部option - Callbacks 回调函数） 《不定时一讲》 DataTable中文网</title>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="dcl4KCseZ0" />
    <meta name="google-site-verification" content="aLPryaYhH4oXkloIrOOwl8F9nIJy8x3Eq_k86lMxuXc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Datatables是一款jQuery表格插件，目前，Datatables最新版本为1.10.11
    Datatables中文网致力于为广大国内开发者提供详尽的中文文档、代码实例等，助力开发者使用这个jQuery表格插件">
    <link href="http://cdn.bootcss.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/css/highlighting.css" rel="stylesheet">
    <link href="/css/site.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <p><a href="http://datatables.club/reference/option/">所有option连接</a></p>

<p>相关连接</p>

<p><a href="http://datatables.club/manual/daily/2016/05/12/all-options-of-features.html">Features</a>
<a href="http://datatables.club/manual/daily/2016/05/12/all-options-of-data.html">Data</a></p>

<p>Callbacks - 回调函数部分</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#example'</span><span class="p">).</span><span class="nx">DataTable</span><span class="p">({</span>
    <span class="s2">"createdRow"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dataIndex</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"A"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'important'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"drawCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'DataTables has redrawn the table'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"footerCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tfoot</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">tfoot</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'th'</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Starting index is "</span> <span class="o">+</span> <span class="nx">start</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"formatNumber"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">toFormat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">toFormat</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\B(?=(\d{3})</span><span class="sr">+</span><span class="se">(?!\d))</span><span class="sr">/g</span><span class="p">,</span> <span class="s2">"'"</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"headerCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">thead</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">thead</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'th'</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">'Displaying '</span> <span class="o">+</span> <span class="p">(</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">+</span> <span class="s1">' records'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"infoCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">max</span><span class="p">,</span> <span class="nx">total</span><span class="p">,</span> <span class="nx">pre</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">start</span> <span class="o">+</span> <span class="s2">" to "</span> <span class="o">+</span> <span class="nx">end</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">"initComplete"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'DataTables has finished its initialisation.'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"preDrawCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'#example tbody'</span><span class="p">).</span><span class="nx">off</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="s1">'td'</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"rowCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">grade</span> <span class="o">==</span> <span class="s2">"A"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">'td:eq(4)'</span><span class="p">,</span> <span class="nx">row</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">'&lt;b&gt;A&lt;/b&gt;'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"stateLoadCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>
        <span class="c1">// Send an Ajax request to the server to get the data. Note that</span>
        <span class="c1">// this is a synchronous request since the data is expected back from the</span>
        <span class="c1">// function</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"/state_load"</span><span class="p">,</span>
            <span class="s2">"async"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="s2">"dataType"</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
            <span class="s2">"success"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">o</span> <span class="o">=</span> <span class="nx">json</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">"stateLoaded"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'Saved filter was: '</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s2">"stateLoadParams"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">"stateSaveCallback"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Send an Ajax request to the server with the state object</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"/state_save"</span><span class="p">,</span>
            <span class="s2">"data"</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
            <span class="s2">"dataType"</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
            <span class="s2">"success"</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="s2">"stateSaveParams"</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>PS:以上代码无任何实际使用价值，纯粹演示对象结构，和新版参数的写法</p>

    <h3>如果大家也有小的技巧，欢迎给我发邮件 <code>thxopen@datatables.club</code></h3>
</div>
</body>
</html>
